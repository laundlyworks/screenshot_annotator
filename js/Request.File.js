!function(){var t="onprogress"in new Browser.Request;Request.File=new Class({Extends:Request,options:{emulation:!1,urlEncoded:!1},initialize:function(t){this.xhr=new Browser.Request,this.formData=new FormData,this.setOptions(t),this.headers=this.options.headers},append:function(t,s){return this.formData.append(t,s),this.formData},reset:function(){this.formData=new FormData},send:function(s){if(!this.check(s))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var i=this.xhr;return t&&(i.onloadstart=this.loadstart.bind(this),i.onprogress=this.progress.bind(this),i.upload.onprogress=this.progress.bind(this)),i.open("POST",this.options.url,!0),i.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,(function(t,s){try{i.setRequestHeader(s,t)}catch(i){this.fireEvent("exception",[s,t])}}),this),this.fireEvent("request"),i.send(this.formData),this.options.async||this.onStateChange(),this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)),this}})}();