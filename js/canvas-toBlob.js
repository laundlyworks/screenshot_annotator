/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */ !function(_){"use strict";var t,e=_.Uint8Array,n=_.HTMLCanvasElement,s=/\s*;\s*base64\s*(?:;|$)/i,i=function(_){for(var n,s,i,o=_.length,$=new e(o/4*3|0),a=0,r=0,l=[0,0],p=0,c=0;o--;)255!==(n=t[(s=_.charCodeAt(a++))-43])&&n!==i&&(l[1]=l[0],l[0]=s,c=c<<6|n,4==++p&&($[r++]=c>>>16,61!==l[1]&&($[r++]=c>>>8),61!==l[0]&&($[r++]=c),p=0));return $};e&&(t=new e([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),n&&!n.prototype.toBlob&&(n.prototype.toBlob=function(_,t){if(t||(t="image/png"),this.mozGetAsFile){_(this.mozGetAsFile("canvas",t));return}var n,o=Array.prototype.slice.call(arguments,1),$=this.toDataURL.apply(this,o),a=$.indexOf(","),r=$.substring(a+1),l=s.test($.substring(0,a));Blob.fake?(n=new Blob,l?n.encoding="base64":n.encoding="URI",n.data=r,n.size=r.length):e&&(n=l?new Blob([i(r)],{type:t}):new Blob([decodeURIComponent(r)],{type:t})),_(n)})}(self);
